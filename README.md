# usysml-test-cases

uSysML ('micro SysML') Test Cases for SysML v2

© Vladimir Likić <vlad.likic@gmail.com>

© Igor Dejanović <igor.dejanovic@gmail.com>

CC BY-SA 4.0   This work is licensed under the Creative Commons
Attribution-ShareAlike 4.0 International license:
https://creativecommons.org/licenses/by-sa/4.0/


# Links

To view the test cases please click [here](/test_cases.md), and to
download the summary PDF file please click [here](/test_cases.pdf).


# Understanding uSysML Test Cases

The test cases are organised under the folder `test_cases`, one test
case per folder named 'test_XY-ABC', where 'XY-ABC' is the test case
unique identifier. Within each test case there are several files,
of which the following are particularly important:

- \*.sysml -- contains the test case SysML v2 textual notation
- \*.output -- contains the test case output (in the uSysML output
notation explained below)
- \*.ipynb -- Jupyter notebook with test case parsed by the SysML
v2 Pilot Implementation

The title of the test case contains a short description of the test
case, and a unique identifier (Test Case ID) which allows it to be
referenced subsequently. The Test Case ID is of the form 'XY-ABC'
where 'XY' refers to the spiral, and 'ABC' is the unique test case
number within a spiral. The spiral shows the scope that the test
case refers to; for example, for a test case that is marked 'spiral 1'
('XY' = 01), only `package`, `part`, and `part def` would have been
expected to be implemented.

Each test case is structured according to the following sections:

- Title -- a short title of the test case together with the number
identifier
- Description -- a description of the test case
- Scope -- give the explicit description fo the scope (note: the scope or
uSysML version can be read from the test case name)
- SysML v2 textual notation -- shows SysML v2 textual notation
- uSysML output -- shows the expected output of after the parsing of the
SysML v2 textual notation. **Note: what is listed as "output" is not a
SysML v2 notation, but a special notation developed for uSysML Test Cases**.
See the explanations below
- Discussion -- any discussion and additional comments
- Notes -- notes, if any
 

## The notation used in the “uSysML output” section

In each Test Case the "uSysML output" section is not SysML v2 notation,
rather this uses a special notation development only for the purpose
of uSysML. The purpose of the notation is to specify namespaces and
possibly additional features of the parsed elements. The examples are
given below with the explanations.


### Example 1

    Root.PackageVehicles.Vehicle

**Meaning**:

`Vehicle` is in the namespace of `PackageVehicles` and `PackageVehicles`
is in the namespace of `Root`.


### Example 2

    Root.PackageVehicles.Vehicle [PartDef]

**Meaning**:

`Vehicle` is in the namespace of `PackageVehicles` which is in the namespace
of `Root`. Furthermore, `Vehicle` is *PartDefinition* element (meaning that
the element `Vehicle` was generated by the SysMLv2 ‘part def’ command).


### Example 3

    Root.PackageVehicles.vehicle [Part]
        typed by=Root.PackageVehicles.Vehicle

**Meaning**:

- `vehicle` is in the namespace of `PackageVehicles` which is in the namspace
of `Root`
- `vehicle` is *PartUsage* typed by *PartDefinition* `Root.PackageVehicles.Vehicle`


### Example 4

Consider a more complex example:

```
Root.PackageVehicles [Package]
 Root.PackageVehicles.Vehicle [PartDef]
 Root.PackageVehicles.Wheel [PartDef]
 Root.PackageVehicles.vehicle [PartUsage]
    typed by=Root.PackageVehicles.Vehicle
  Root.PackageVehicles.vehicle.w [PartUsage]
      typed by=Root.PackageVehicles.Wheel
Root.PackageStations [Package]
 Root.PackageStations.VehicleStation [PartDef]
```

The indentation indicates the namespace level. The namespace level can be
read from the actual textual output, however the indentation helps guide
the eye. Specifically:

```
Root.PackageVehicles [Package]
```

and 

```
Root.PackageStations [Package]
```

are at the same namespace level, just under the 'Root'. Furthermore, the
element:


```
Root.PackageVehicles.vehicle.w [PartUsage]
```

Is the only element that is in the namespace that is three levels deep.


# Local installation of uSysML test cases

## Project file/folders Layout

- Test cases are written in test_cases/testxxxx folder. 
- The main file is in markdown format (extension `.md`). SysMLv2 model in
  textual notation for the test case is in `.sysml` file (should be named
  `testxxxx.sysml`).
- Expected output for the given model is in `testxxxx.output` file.
- These files (or any other file) may be included in the main `.md` file
using the following syntax.
```
{% include "testxxxx.sysml" %}
```

## Installation steps

To run PDF document generator you need [pandoc](https://pandoc.org/MANUAL.html)
installed for your operating system.

Also, we are using [Jinja2](https://jinja2docs.readthedocs.io/en/stable/) for
file inclusion.

Install pandoc using your OS package manager and then run:

``` sh
./setup.sh
```

This will create a Python environment and install Python dependencies. To
activate the environment run:

``` sh
source venv/bin/activate
```

## Generating documentation locally

Download the project from GitHub with `git clone`:

```
$ git clone https://github.com/likicv/usysml-test-cases
```

From the project root:

```
$ ./gendocs.py
```

or 

``` sh
$ python gendocs.py
```

This will process all the individual test cases and create a cumulative
test case document `test_cases.md`, as well as the corresponding PDF file.
Note that the PDF file creation requires `pandoc` to be installed on your 
system.


# References

The following references are used in this work:
- Kernel Modeling Language (KerML) (‘1-Kernel_Modeling_Language.pdf’)
- OMG Systems Modeling Language (SysML) (‘2-OMG_Systems_Modeling_Language.pdf’)
- [SysMLv2 Pilot Implementation Prototype](https://github.com/Systems-Modeling/SysML-v2-Pilot-Implementation)
- Sanford Friedental, “Introduction to the SysML v2 Language Graphical
Notation”, Release: 2021-05-21
- Model Driven Solutions, Inc. “Introduction to the SysML v2 Language
Textual Notation”, Release: 2021-05

